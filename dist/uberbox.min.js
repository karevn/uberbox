!function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates["carousel-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<img src="'+(null==(__t=thumbnail)?"":__t)+'">';return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates["content-image"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<img src="'+(null==(__t=url)?"":__t)+'"/>';return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates.download=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="uberbox-download-wrapper">\n	<a class="uberbox-download" href="'+(null==(__t=encodeURIComponent(model.get("download_url")))?"":__t)+'"><i class="uberbox-icon-download"></i>Download</a>\n</div>';return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates["lightbox-content"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="uberbox-prev"><i></i></div>\n<div class="uberbox-next"><i></i></div>\n';return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates["lightbox-item"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="uberbox-lightbox-item-content">\n	<div class="uberbox-close uberbox-icon-close"></div>\n	<div class="uberbox-item-object"></div>\n	<div class="uberbox-item-description">\n		<div class="uberbox-description-content">\n			',model.get("title")&&(__p+="<h2>"+(null==(__t=model.get("title"))?"":__t)+"</h2>"),__p+="\n			"+(null==(__t=model.get("description"))?"":__t)+'\n		</div>\n		<div class="uberbox-description-bottom">\n			<div class="uberbox-share">\n			</div>\n		</div>\n	</div>\n</div>';return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates.share=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){servicesConfig=model.get("share"),__p+="\n";for(service in servicesConfig)__p+="\n	",serviceConfig=servicesConfig[service],__p+='\n	<a target="_blank" class="uberbox-share-link uberbox-icon-'+(null==(__t=service)?"":__t)+'" href="'+(null==(__t=model.getShareLinkUrl(service))?"":__t)+'" ',serviceConfig.title&&(__p+=' title="'+(null==(__t=serviceConfig.title)?"":__t)+'"> '),__p+="> \n			",serviceConfig.image&&(__p+='\n				<img src="'+(null==(__t=serviceConfig.image)?"":__t)+'" alt="">\n			'),__p+="\n	</a>\n"}return __p}}(),function(){window.Uberbox=window.Uberbox||{},window.Uberbox.Templates=window.Uberbox.Templates||{},window.Uberbox.Templates.uberbox=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="uberbox-lightbox-wrapper"></div>\n<div class="uberbox-carousel-wrapper"></div>';return __p}}(),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","backbone","backbone.marionette"],function(i,o,r,n){t.Uberbox=e(t,i,o,r,n)});else if("undefined"!=typeof exports){var i=require("underscore"),o=require("backbone"),r=require("marionette"),n=require("jquery");e(t,i,n,o,r)}else t.Uberbox=e(t,t._,t.uberboxjQuery||t.jQuery||t.Zepto||t.ender||t.$,Backbone,Marionette)}(this,function(t,e,i,o,r){var n,s=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(t){function o(t){this.onKeyDown=s(this.onKeyDown,this),o.__super__.constructor.call(this,e.extend({el:i('<div class="uberbox" />').appendTo(i("body"))},t))}return a(o,t),o.instances=[],o.prototype.template="#uberbox-template-main",o.prototype.regions={lightbox:".uberbox-lightbox-wrapper",carousel:".uberbox-carousel-wrapper"},o.prototype.ui={},o.contentViewTypes=function(){return{image:{condition:/\.(gif|png|jpeg|jpg)$/i,"class":o.ImageObjectView},audio:{condition:/\.(mp3|ogg)$/i,"class":o.AudioObjectView},youtube:{condition:/((\(\/\/)?(www\.)?youtube\.com\/watch\?v=.+)|((\/\/)(www\.)?youtu\.be\/.*)/i,"class":o.YoutubeObjectView},vimeo:{condition:/(\/\/)?vimeo\.com\/\d+121137859/i,"class":o.VimeoObjectView},iframe:{condition:/(\/|\.html|\.htm|\.php|.aspx)$/i,"class":o.IframeObjectView},gmap:{condition:/(google\.(\w+)\/maps\/)|(maps\.google\.(\w+))|(goo\.gl\/maps\/)/i,"class":o.GoogleMapsObjectView},unknown:{"class":o.UnknownItemView}}},o.show=function(t,i){var r;return null==i&&(i={}),i=e.extend({current:0,orientation:"vertical",collection:new o.ItemCollection(t),carousel:!1},i),t&&t.length>0?(this.instances.push(r=new o(i)),r):void 0},o.close=function(){var t;return this.instances.length>0?(t=this.instances.pop(),t.remove()):void 0},o.getPixelRatio=function(){return window.devicePixelRatio>0?window.devicePixelRatio:1},o.getObjectViewType=function(t){var i,r,n,s;if(n=t.get("type"))return o.contentViewTypes[n];s=o.contentViewTypes();for(n in s)if(r=s[n],i=!1,r.condition?(e.isRegExp(r.condition)&&(i=t.get("url").match(r.condition)),e.isFunction(r.condition)&&(i=r.condition(t))):i=!0,i)return r["class"]},o.prototype.initialize=function(){var t;return o.__super__.initialize.apply(this,arguments),this.render(),this.bindUIElements(),this.$el.addClass("uberbox-"+this.getOption("orientation")),this.showOverlay(),t=e.clone(this.options),delete t.el,this.lightbox.show(new o.Lightbox(t)),this.listenTo(this.lightbox.currentView,"close",function(t){return function(){return t.remove()}}(this)),this.getOption("carousel")&&(this.$el.addClass("uberbox-has-carousel"),this.carousel.show(new o.Carousel(t))),this.getOption("collection").at(this.getOption("current")).activate(),i("body").on("keydown.uberbox",this.onKeyDown)},o.prototype.remove=function(){return o.__super__.remove.apply(this,arguments),this.ui.overlay.removeClass("visible"),i("body").off("keydown.uberbox",this.onKeyDown),setTimeout(function(t){return function(){return t.ui.overlay.remove()}}(this),600)},o.prototype.onKeyDown=function(t){return 27===t.which&&(t.preventDefault(),this.remove()),37===t.which||38===t.which?(this.collection.activatePrev(),!1):40===t.which||39===t.which?(this.collection.activateNext(),!1):void 0},o.prototype.showOverlay=function(){return this.ui.overlay=i('<div class="uberbox-overlay" />').appendTo(i("body")),e.defer(function(t){return function(){return t.ui.overlay.addClass("visible")}}(this)),this.ui.overlay.on("click",function(t){return function(){return t.remove()}}(this))},o}(r.LayoutView);var u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n.Item=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.defaults={description_position:"bottom"},i.prototype.shareUrls={facebook:function(){return"//www.facebook.com/share.php?v=4&src=bm&u=%url%"},twitter:function(){return"//twitter.com/home?status=%url%"},googleplus:function(){return"//plus.google.com/share?url=%url%"},reddit:function(){return"//reddit.com/submit?url=%url%"},digg:function(){return"//digg.com/submit?phase=2&url=%url%}"},delicious:function(){return"//delicious.com/post?url="},pinterest:function(){return"//www.pinterest.com/pin/create/button/?url=%url%&description=%title%"},vk:function(){return"http://vk.com/share.php?url=%url%"}},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.get("share")&&e.isBoolean(this.get("share"))?this.set("share",{facebook:!0,twitter:!0,googleplus:!0,reddit:!0,digg:!0,delicious:!0,pinterest:!0,vk:!0}):void 0},i.prototype.activate=function(){return this.collection.activeItem!==this?this.trigger("activate",this):void 0},i.prototype.deactivate=function(){return this.trigger("deactivate")},i.prototype.next=function(){return this.collection.next(this)},i.prototype.prev=function(){return this.collection.prev(this)},i.prototype.isActive=function(){return this.collection.activeItem===this},i.prototype.isNext=function(){return this.collection.activeItem===this.prev()},i.prototype.isPrev=function(){return this.collection.activeItem===this.next()},i.prototype.processPseudotags=function(t){var e,i;i={url:window.location.href,title:this.get("title"),description:this.get("description")};for(e in i)t=t.replace("%"+e,encodeURIComponent(i[e]));return t},i.prototype.getShareLinkUrl=function(t){var e,i;return e=this.get("share")[t],e.url?e.url:(i=this.shareUrls[t](),this.processPseudotags(i))},i}(o.Model),n.ItemCollection=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=n.Item,e.prototype.current=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.on("activate",function(t){return function(e){return t.activeItem&&t.activeItem.deactivate(),t.activeItem=e}}(this))},e.prototype.next=function(t){var e;return e=this.indexOf(t),e===this.length-1?null:this.at(e+1)},e.prototype.prev=function(t){var e;return e=this.indexOf(t),0!==e?this.at(e-1):void 0},e.prototype.activateNext=function(){return this.current&&this.current.next()?this.current.next().activate():void 0},e.prototype.activatePrev=function(){return this.current&&this.current.prev()?this.current.prev().activate():void 0},e}(o.Collection);var s=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n.SlidingWindowItem=function(t){function i(){return this.onClicked=s(this.onClicked,this),i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.loaded=!1,i.prototype.events=function(){return{click:"onClicked"}},i.prototype.modelEvents={activate:"onItemActivated",deactivate:"onItemDeactivated"},i.prototype.belongs=function(){return this.top>0&&this.left>0&&this.width+this.left<this.getParent().width()&&this.top+this.height<this.getParent().height()},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.listenToOnce(this,"load",function(t){return function(){return t.loaded=!0,t.$el.addClass("uberbox-loaded"),t.loaderTimeout&&clearTimeout(t.loaderTimeout),t.hideLoader()}}(this)),this.render(),this.bindUIElements(),this.showRegions?this.showRegions():void 0},i.prototype.getNextToScrollTo=function(t){var e;return this.model===t?this:(e=this.getOption("next"))?e.getNextToScrollTo(t):null},i.prototype.getPrevToScrollTo=function(t){var e;return this.model===t?this:(e=this.getOption("prev"))?e.getPrevToScrollTo(t):null},i.prototype.runAction=function(t){return this.loaded?t():(this.loaderTimeout=setTimeout(this.showLoader,200),this.listenToOnce(this,"load",function(){return function(){return setTimeout(t,200)}}(this)))},i.prototype.getParent=function(){return this.parent||(this.parent=this.$el.parent()),this.parent},i.prototype.remove=function(){return this.$el.removeClass("uberbox-visible"),this.getOption("next")&&(this.getOption("next").options.prev=null),this.getOption("prev")&&(this.getOption("prev").options.next=null),setTimeout(function(t){return function(){return i.__super__.remove.call(t)}}(this),600)},i.prototype.reveal=function(){return e.defer(function(t){return function(){return t.$el.addClass("uberbox-visible")}}(this))},i.prototype.bindUIElements=function(){return i.__super__.bindUIElements.apply(this,arguments),this.model.collection.activeItem===this.model?this.onItemActivated():void 0},i.prototype.onItemActivated=function(){return this.$el.addClass("uberbox-current")},i.prototype.onItemDeactivated=function(){return this.$el.removeClass("uberbox-current")},i.prototype.onClicked=function(){return this.model.activate()},i}(r.LayoutView);var u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n.SlidingWindow=function(t){function o(t){o.__super__.constructor.call(this,e.extend({current:0},t)),this.listenTo(this.collection,"activate",this.onItemActivated)}return a(o,t),o.prototype.defaults={orientation:"vertical"},o.prototype.template="",o.prototype.onShow=function(){return i(window).on("resize.uberbox",this.layout)},o.prototype.remove=function(){return i(window).off("resize.uberbox",this.layout),o.__super__.remove.apply(this,arguments)},o.prototype.getChildView=function(){var t;return t=this.getOption("childView")||this.constructor},o.prototype.createChildView=function(t,i){var o,n;return null==i&&(i={}),n=this.getChildViewClass(),i=e.extend(e.extend({model:t,orientation:this.getOption("orientation")},r._getValue(this.getOption("childViewOptions"),this,[t])),i),o=new n(i),i.prev?(o.$el.insertAfter(i.prev.$el),o.layoutAsNext()):i.next?(o.$el.insertBefore(i.next.$el),o.layoutAsPrev()):(o.$el.appendTo(this.$el),o.layoutAsCurrent()),o},o}(r.View);var s=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n.CarouselItem=function(t){function i(){return this.onImageLoaded=s(this.onImageLoaded,this),i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.template="#uberbox-template-carousel-item",i.prototype.className="uberbox-carousel-item",i.prototype.padding=15,i.prototype.events=function(){return e.extend(i.__super__.events.apply(this,arguments),{"load @ui.image":"onImageLoaded"})},i.prototype.ui={image:"img"},i.prototype.getImageAspectRatio=function(){var t,e;return e=this.ui.image[0],t=e.naturalWidth/e.naturalHeight},i.prototype.getHeightInVerticalMode=function(){return this.width/this.getImageAspectRatio()},i.prototype.getWidthInHorizontalMode=function(){return this.height*this.getImageAspectRatio()},i.prototype.bindUIElements=function(){return i.__super__.bindUIElements.apply(this,arguments),this.ui.image[0].complete?e.defer(function(t){return function(){return t.onImageLoaded()}}(this)):void 0},i.prototype.onImageLoaded=function(){return this.trigger("load")},i.prototype.layoutContent=function(){},i.prototype.hideLoader=function(){},i.prototype.layoutAsCurrent=function(){return this.calculateCoordinatesAsCurrent(),this.loaded&&this.layoutContent(),this.applyLayout()},i.prototype.layoutAsNext=function(){return this.calculateCoordinatesAsNext(),this.loaded&&this.layoutContent(),this.applyLayout()},i.prototype.layoutAsPrev=function(){return this.calculateCoordinatesAsPrev(),this.loaded&&this.layoutContent(),this.applyLayout()},i.prototype.fits=function(){var t;return this.belongs()?!0:(t=this.$el.offset(),this.top<this.getParent().height()&&t.top+this.$el.height()>0&&t.left-this.$el.offsetParent().offset().left<this.getParent().width()&&t.left-this.$el.offsetParent().offset().left+this.$el.width()>0?!0:!1)},i.prototype.applyLayout=function(){return this.$el.css({left:this.left,top:this.top,width:this.width,height:this.height})},i}(n.SlidingWindowItem),n.VerticalCarouselItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.calculateCoordinatesAsPrev=function(){var t;return t=this.getOption("next"),this.left=this.padding,this.width=this.getParent().width()-2*this.padding,this.height=this.getHeightInVerticalMode(),this.top=t.top-this.padding-this.height},e.prototype.calculateCoordinatesAsNext=function(){var t;return t=this.getOption("prev"),this.left=this.padding,this.top=this.padding+t.top+t.height,this.width=this.getParent().width()-2*this.padding,this.height=this.getHeightInVerticalMode()},e.prototype.calculateCoordinatesAsCurrent=function(){var t;return this.width=this.getParent().width()-2*this.padding,this.height=this.getHeightInVerticalMode(),t=this.getParent().height()/2-this.height/2,this.left=this.padding,this.top=t},e}(n.CarouselItem),n.HorizontalCarouselItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.calculateCoordinatesAsPrev=function(){var t;return t=this.getOption("next"),this.height=this.getParent().height()-2*this.padding,this.width=this.getWidthInHorizontalMode(),this.left=t.left-this.width-this.padding,this.top=this.padding},e.prototype.calculateCoordinatesAsNext=function(){var t;return t=this.getOption("prev"),this.left=t.left+t.width+this.padding,this.top=this.padding,this.height=this.getParent().height()-2*this.padding,this.width=this.getWidthInHorizontalMode()},e.prototype.calculateCoordinatesAsCurrent=function(){return this.height=this.getParent().height()-2*this.padding,this.width=this.getWidthInHorizontalMode(),this.left=this.getParent().width()/2-this.width/2,this.top=this.padding},e}(n.CarouselItem),n.Carousel=function(t){function e(){return this.layout=s(this.layout,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="uberbox-carousel-content",e.prototype.template="#uberbox-template-carousel-content",e.prototype.render=function(){return this.$el.html(r.Renderer.render(this.template))},e.prototype.getChildViewClass=function(){return"vertical"===this.getOption("orientation")?n.VerticalCarouselItem:n.HorizontalCarouselItem},e.prototype.layout=function(){var t,e;for(this.currentItemView.layoutAsCurrent(),t=this.currentItemView.getOption("next");t;)t.layoutAsNext(),t=t.getOption("next");for(t=this.currentItemView.getOption("prev"),e=[];t;)t.layoutAsPrev(),e.push(t=t.getOption("prev"));return e},e.prototype.buildFromScratch=function(t){return this.currentItemView=this.createChildView(t),this.currentItemView.layoutAsCurrent(),this.currentItemView.reveal(),this.currentItemView.runAction(function(t){return function(){return t.layoutNextItems(t.currentItemView),t.layoutPrevItems(t.currentItemView)}}(this))},e.prototype.slideTo=function(t){return this.currentItemView.runAction(function(e){return function(){return e.currentItemView=t,e.layout()}}(this))},e.prototype.layout=function(){return this.currentItemView.layoutAsCurrent(),this.currentItemView.runAction(function(t){return function(){return t.layoutPrevItems(t.currentItemView),t.layoutNextItems(t.currentItemView)}}(this))},e.prototype.layoutNextItems=function(t){var e;return t===this.currentItemView||(t.layoutAsNext(),t.fits())?t.model.next()&&!t.getOption("next")&&t.belongs()?(e=this.createChildView(t.model.next(),{prev:t}),t.options.next=e,e.options.prev=t,e.layoutAsNext(),e.reveal(),e.runAction(function(t){return function(){return t.layoutNextItems(e)}}(this))):t.getOption("next")?this.layoutNextItems(t.getOption("next")):void 0:(t.remove(),null)},e.prototype.layoutPrevItems=function(t){var e;return t===this.currentItemView||(t.layoutAsPrev(),t.fits())?t.model.prev()&&!t.getOption("prev")&&t.belongs()?(e=this.createChildView(t.model.prev(),{next:t}),t.options.prev=e,e.options.next=t,e.layoutAsPrev(),e.reveal(),e.runAction(function(t){return function(){return t.layoutPrevItems(e)}}(this))):t.getOption("prev")?this.layoutPrevItems(t.getOption("prev")):void 0:(t.remove(),null)},e.prototype.onItemActivated=function(t){var e,i;if(!this.currentItemView||t!==this.currentItemView.model){if(!this.currentItemView)return this.buildFromScratch(t),void 0;if(e=this.currentItemView.getNextToScrollTo(t))return this.slideTo(e);if(i=this.currentItemView.getPrevToScrollTo(t))return this.slideTo(i);for(this.currentItemView.remove(),e=this.currentItemView.getOption("next");e;)e.remove(),e=e.getOption("next");for(i=this.currentItemView.getOption("prev");i;)i.remove(),i=i.getOption("prev");return this.buildFromScratch(t)}},e}(n.SlidingWindow);var p,s=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};p=function(t){function e(){return this.fadeIn=s(this.fadeIn,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.supportsOversizing=!1,e.prototype.fadeIn=function(){return this.visible=!0,this.$el.addClass("uberbox-visible")},e.prototype.getAspectRatio=function(){return this.$el.width()/this.$el.height()},e.prototype.isObjectLoaded=function(){},e.prototype.getObjectNaturalAspectRatio=function(){},e.prototype.layoutOversized=function(){},e}(r.ItemView),n.ImageObjectView=function(t){function e(){return this.onObjectLoaded=s(this.onObjectLoaded,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="uberbox-image-content",e.prototype.waitForLoad=!0,e.prototype.supportsOversizing=!0,e.prototype.template="#uberbox-template-image",e.prototype.ui={image:"img"},e.prototype.bindUIElements=function(){return e.__super__.bindUIElements.apply(this,arguments),this.isObjectLoaded()&&this.onObjectLoaded(),this.ui.image.one("load.uberbox",this.onObjectLoaded),this.ui.image.one("error.uberbox",this.onObjectError)},e.prototype.unbindUIElements=function(){return this.ui.image.off("load.uberbox"),this.ui.image.off("error.uberbox"),e.__super__.unbindUIElements.apply(this,arguments)},e.prototype.getWidth=function(){return this.$el.width()},e.prototype.getObjectWidth=function(){return this.ui.image.width()},e.prototype.isObjectLoaded=function(){return this.ui.image[0].complete},e.prototype.getObjectNaturalWidth=function(){return this.ui.image[0].naturalWidth},e.prototype.getObjectNaturalHeight=function(){return this.ui.image[0].naturalHeight},e.prototype.getObjectNaturalAspectRatio=function(){var t;return t=this.ui.image[0],t.naturalWidth/t.naturalHeight},e.prototype.onObjectError=function(){return this.trigger("error")},e.prototype.onObjectLoaded=function(){return this.trigger("load")},e}(p),n.DescriptionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="#uberbox-template-description",e.prototype.serializeData=function(){return{model:this.model}},e}(r.ItemView);var s=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};return n.LightboxItem=function(t){function i(){return this.layout=s(this.layout,this),i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.defaults={description:{position:"right"}},i.prototype.template="#uberbox-template-lightbox-item",i.prototype.className="uberbox-lightbox-item",i.prototype.regions={object:".uberbox-item-object",description:".uberbox-item-description",download:".uberbox-download"},i.prototype.ui={content:"> .uberbox-lightbox-item-content"},i.prototype.padding=20,i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.once("load",function(t){return function(){return e.defer(function(){return t.layout(),e.defer(function(){return t.$el.addClass("uberbox-visible")})})}}(this))},i.prototype.layout=function(){var t,e,i,o,r,n,s,u,a;if((!this.waitForLoad||this.loaded)&&(a=this.$el.width(),o=this.$el.height(),0!==a&&0!==o))return this.description.currentView&&"right"===this.model.get("description_position")?(n=this.object.currentView.getObjectNaturalAspectRatio(),e=a-this.description.currentView.$el.width(),t=e/o,n>t&&this.object.currentView.supportsOversizing?(this.$el.parent().css("margin-left",""),this.fitOversized()):n>t?(this.fitWidth(),this.$el.parent().css("margin-left",-(this.$el.parent().width()-this.description.currentView.$el.width()-this.object.currentView.$el.width())/4)):(this.$el.parent().css("margin-left",""),this.fitHeight())):(r=this.$el.closest(".uberbox-lightbox-item"),u=this.object.currentView,u.getObjectNaturalWidth()<a&&u.getObjectNaturalHeight()<o?this.fitNaturally():(i=r.width()/(r.height()-(this.description.currentView?this.description.$el.outerHeight():0)),s=u.getObjectNaturalAspectRatio(),i>s?this.fitHeight():this.fitWidth()))},i.prototype.fitHeight=function(){return this.$el.addClass("uberbox-fit-height").removeClass("uberbox-fit-width uberbox-natural-fit uberbox-fit-oversized uberbox-fit-height-oversized uberbox-fit-width-oversized"),e.defer(function(t){return function(){return t.ui.content.css("margin-left",-(t.object.currentView.$el.width()-t.object.currentView.getObjectWidth())/2)}}(this))},i.prototype.fitWidth=function(){return this.$el.addClass("uberbox-fit-width").removeClass("uberbox-fit-height uberbox-natural-fit uberbox-fit-oversized uberbox-fit-height-oversized uberbox-fit-width-oversized"),this.ui.content.css("margin-left","")},i.prototype.fitNaturally=function(){return this.$el.removeClass("uberbox-fit-width").removeClass("uberbox-fit-height uberbox-natural-fit uberbox-fit-height-oversized uberbox-fit-width-oversized uberbox-fit-oversized"),this.ui.content.css("margin-left","")},i.prototype.fitOversized=function(){return this.$el.addClass("uberbox-fit-oversized").removeClass("uberbox-fit-width uberbox-fit-height"),this.ui.content.css("margin-left",""),this.object.currentView.getObjectNaturalAspectRatio()>this.object.currentView.getAspectRatio()?this.$el.addClass("uberbox-fit-height-oversized").removeClass("uberbox-fit-width-oversized"):this.$el.addClass("uberbox-fit-width-oversized").removeClass("uberbox-fit-height-oversized")},i.prototype.hideLoader=function(){},i.prototype.showLoader=function(){},i.prototype.showRegions=function(){var t,i;return i=n.getObjectViewType(this.model),this.object.show(new i(e.extend(this.options,{model:this.model}))),this.object.currentView.waitForLoad?(this.showLoader(),this.listenToOnce(this.object.currentView,"load",function(t){return function(){return t.trigger("load"),t.hideLoader()}}(this))):this.trigger("load"),this.model.get("description")&&(this.description.show(new n.DescriptionView(e.extend(this.options,{model:this.model}))),this.$el.addClass("uberbox-has-description"),this.$el.addClass("uberbox-description-at-"+this.model.get("description_position"))),(t=this.model.get("download_url"))&&this.download.show(new n.DownloadView(e.extend(this.options,{model:this.model}))),setTimeout(function(t){return function(){return t.trigger("load")}}(this),500)},i.prototype.layoutAsCurrent=function(){return this.$el.css({transform:""}),this.layout()},i.prototype.remove=function(){return this.model.isNext()&&this.$el.addClass("uberbox-flyout-next"),this.model.isPrev()&&this.$el.addClass("uberbox-flyout-prev"),this.getOption("next")&&(this.getOption("next").options.prev=null),this.getOption("prev")&&(this.getOption("prev").options.next=null),setTimeout(function(t){return function(){return i.__super__.remove.call(t)}}(this),600)},i}(n.SlidingWindowItem),n.DownloadView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="#uberbox-template-download",e}(r.ItemView),n.VerticalLightboxItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.layoutAsNext=function(){return this.$el.css({transform:"translate(0, "+i(window).height()+"px)"}),this.layout()},e.prototype.layoutAsPrev=function(){return this.$el.css({transform:"translate(0, -"+i(window).height()+"px)"}),this.layout()},e}(n.LightboxItem),n.HorizontalLightboxItem=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.layoutAsNext=function(){return this.$el.css({transform:"translate(120%, 0)"}),this.layout()},e.prototype.layoutAsPrev=function(){return this.$el.css({transform:"translate(-120%, 0)"}),this.layout()},e}(n.LightboxItem),n.Lightbox=function(t){function i(){return this.layout=s(this.layout,this),i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.className="uberbox-lightbox-content",i.prototype.template="#uberbox-template-lightbox-content",i.prototype.ui={next:".uberbox-next",prev:".uberbox-prev",close:".uberbox-close"},i.prototype.events={"click @ui.next":function(){return this.ui.next.is(".uberbox-disabled")?void 0:this.currentItemView.model.next().activate()},"click @ui.prev":function(){return this.ui.prev.is(".uberbox-disabled")?void 0:this.currentItemView.model.prev().activate()},"click @ui.close":function(){return this.trigger("close")}},i.prototype.getChildViewClass=function(){return"horizontal"===this.getOption("orientation")?n.HorizontalLightboxItem:n.VerticalLightboxItem},i.prototype.onShow=function(){return i.__super__.onShow.apply(this,arguments),this.render(),this.bindUIElements()},i.prototype.render=function(){return this.$el.html(r.Renderer.render(this.template))},i.prototype.onItemActivated=function(t){return this.currentItemView?t===this.currentItemView.model.next()?this.scrollNext():t===this.currentItemView.model.prev()?this.scrollPrev():this.rebuild():this.rebuild(),this.currentItemView.model.next()?this.ui.next.removeClass("uberbox-disabled"):this.ui.next.addClass("uberbox-disabled"),this.currentItemView.model.prev()?this.ui.prev.removeClass("uberbox-disabled"):this.ui.prev.addClass("uberbox-disabled")},i.prototype.checkPrevNext=function(){},i.prototype.rebuild=function(){var t,e;return this.currentItemView&&this.currentItemView.remove(),this.prevItemView&&this.prevItemView.remove(),this.nextItemView&&this.nextItemView.remove(),this.currentItemView=this.createChildView(this.collection.activeItem),(t=this.collection.activeItem.next())&&(this.nextItemView=this.createChildView(t,{prev:this.currentItemView})),(e=this.collection.activeItem.prev())?this.prevItemView=this.createChildView(e,{next:this.currentItemView}):void 0},i.prototype.scrollNext=function(){return this.prevItemView&&this.prevItemView.remove(),this.currentItemView.layoutAsPrev(),this.prevItemView=this.currentItemView,this.nextItemView.layoutAsCurrent(),this.currentItemView=this.nextItemView,this.nextItemView=this.nextItemView.model.next()?this.createChildView(this.nextItemView.model.next(),{prev:this.nextItemView}):null},i.prototype.scrollPrev=function(){return this.nextItemView&&this.nextItemView.remove(),this.currentItemView.layoutAsNext(),this.nextItemView=this.currentItemView,this.prevItemView.layoutAsCurrent(),this.currentItemView=this.prevItemView,this.prevItemView=this.prevItemView.model.prev()?this.createChildView(this.prevItemView.model.prev(),{next:this.prevItemView}):null},i.prototype.layout=function(){return this.currentItemView.layoutAsCurrent(),this.nextItemView&&e.debounce(function(t){return function(){return t.nextItemView.layoutAsNext()}}(this),200),this.prevItemView?e.debounce(function(t){return function(){return t.prevItemView.layoutAsPrev()}}(this),200):void 0},i}(n.SlidingWindow),n});